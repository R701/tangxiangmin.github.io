<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="/css/blog.css">
    <link rel="stylesheet" href="/css/fonts/iconfont.css">
    <!--<link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css">-->
    <link rel="stylesheet" href="//cdn.bootcss.com/fancybox/3.1.25/jquery.fancybox.min.css">
    <script src="/js/require.js" data-main="/js/main"></script>
</head>
<body>
<div id="blog" class="page page-theme-base" v-cloak>
    <blog-header></blog-header>
    <header class="page_hd" data-v-04342fbc="">
    <div class="container header" data-v-04342fbc="">
        <h1 class="logo" data-v-04342fbc="">
            <a href="/" class="nuxt-link-exact-active nuxt-link-active" data-v-04342fbc="">橙红年代</a>
        </h1>
        <div class="show-md" data-v-04342fbc="">
            <div class="btn-list" data-v-04342fbc="">
                <div class="btn-icon" data-v-04342fbc="">
                    <span class="btn-line" data-v-04342fbc=""></span>
                    <span class="btn-line" data-v-04342fbc=""></span>
                    <span class="btn-line" data-v-04342fbc=""></span>
                </div>
            </div>
        </div>
        <nav class="nav-responsive" data-v-04342fbc="">
            
            <a class="nav_item" href="/">首页</a>
            
            <a class="nav_item" href="/archives">归档</a>
            
            <a class="nav_item" href="/tags">标签</a>
            
            <a class="nav_item" href="/test">Test</a>
            
        </nav>
    </div>
</header>
    <main class="page_mn" >
        <div class="container">
            <article class="article article-detail">
    <header class="text-center">
        <h2 class="article_hd">博客SSR实践总结</h2>
        <div class="article_info">
            <span class="hide-sm">发表于</span>
            <span class="show-sm">
                <i class="iconfont icon-archives"></i>
            </span>
            <time>2017/7/18 23:16:21</time>
            |
            <span class="hide-sm">分类于</span>
            <span class="show-sm"><i class="iconfont icon-tag"></i></span>
            
                <a href="/categories/JavaScript" class="hover-highlight">JavaScript</a>
            

        </div>
    </header>
    <div class="article_ct">
        <p>由于百度半年都没有收录这个博客的缘故，很早就想尝试Vue的服务端渲染（Server Side Rendering）。上周末难得双休，决定实现这个功能，然后从vue-cli迁移到nuxt，以及后台从PHP迁移到NodeJS共花了两天时间，然后从Apache迁移到Nginx上又花了一天时间，一番折腾之后，有了下面的血泪史。</p>
<a id="more"></a>
<p>项目<a href="git@github.com:tangxiangmin/ShyMean.git">传送门</a>，参考：</p>
<ul>
<li><a href="https://ssr.vuejs.org/zh/" target="_blank" rel="external">Vue-ssr</a></li>
</ul>
<ul>
<li><a href="https://nuxtjs.org/" target="_blank" rel="external">NUXT官网</a></li>
</ul>
<h2 id="SSR概念"><a href="#SSR概念" class="headerlink" title="SSR概念"></a>SSR概念</h2><p>这真的不是阴阳师里面的脱非入欧的那啥~</p>
<p>传统网站由后台提供数据，然后使用模板引擎渲染好页面，最后返回给客户端，因此浏览器初始拿到的就是一个完整的页面；用Vue搭的单页面应用，几乎所有的html代码都是在异步获得数据之后由JS渲染的，而浏览器初始拿到的页面只有一个孤零零的<code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code>根节点。</p>
<p>对于用户来说可能没啥感觉（由于页面体积极简可能速度更快），但是对于SEO来讲这就是灾难啊~解决这个问题，就必须要在服务端返回HTML文档。这仿佛进入了一个死胡同，幸运的是，大佬们为我们提供了Vue的<a href="https://ssr.vuejs.org/zh/" target="_blank" rel="external">SSR解决方案</a>。</p>
<p>文档里面有一句：</p>
<blockquote>
<p>将同一个组件渲染为服务器端的 HTML 字符串，将它们直接发送到浏览器，最后将静态标记”混合”为客户端上完全交互的应用程序</p>
</blockquote>
<p>想到了之前使用过的一个叫做<code>JUI</code>的管理系统框架，不过实现完全不同~具体原理啥的后面再深入，需要注意的是，后台只能是 <code>Node.js server</code>环境（所以需要从PHP进行迁移）。</p>
<p>文档中推荐了一个<a href="https://nuxtjs.org/guide/" target="_blank" rel="external">Nuxt</a>的框架，在Vue SSR解决方案的基础上进行进一步封装，帮助我们快速部署SSR的Vue项目。</p>
<h2 id="项目迁移"><a href="#项目迁移" class="headerlink" title="项目迁移"></a>项目迁移</h2><h3 id="Nuxt"><a href="#Nuxt" class="headerlink" title="Nuxt"></a>Nuxt</h3><p>在<code>ShymeanV0.2.0</code>的版本中使用的是<code>vue-cli</code>进行开发，最后将项目打包，由PHP托管和提供数据的。Nxut提供了与之类似的功能，包括了开发<code>dev</code>，打包<code>build</code>功能，与vue-cli不同的是，我们直接使用Nuxt内置的nodejs服务器托管项目。</p>
<p>安装啥的就不扯了（这里没遇见啥问题），下载完成之后运行<code>npm run start</code>，然后在浏览器输入<code>localhost:3000</code>预览即可。</p>
<p>当然通过浏览器我们发现不了SSR的效果，这里推荐使用Chrome应用<code>Postman</code>来进行调试。安装启动Postman，然后输入地址，就可以查看对应的响应报文了。</p>
<p>可以看见实际的HTML内容，是正儿八经的服务端渲染；如果采用相同的方式去爬去vue-cli的打包文件，得到的肯定只是一个根节点而已。</p>
<h3 id="nuxt-express"><a href="#nuxt-express" class="headerlink" title="nuxt-express"></a>nuxt-express</h3><p>nuxt的官方demo并没有提到如何处理数据的问题，应用肯定是需要调用服务器数据接口的，然而，端口号为3000的这个服务器是内置在nuxt框架中的，我们如何绑定请求路由和数据库操作呢？</p>
<p><a href="https://nuxtjs.org/api/nuxt" target="_blank" rel="external">nuxt文档</a>中又推荐了<a href="https://github.com/nuxt-community/express-template" target="_blank" rel="external">nuxt-express</a>来解决这个问题，OK知道用啥框架了，下一步就是项目迁移了。</p>
<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>nuxt为我们指定了项目的目录结构，文档里面有写，这里只是简单介绍一下</p>
<ul>
<li><code>asstes</code>，存放静态资源如图片，样式表，字体啥的</li>
<li><code>components</code>，存放vue组件，感谢Vue组件系统，整个项目迁移成本非常低</li>
<li><code>layouts</code>，布局文件，相当于vue-cli中的<code>App.vue</code>入口文件，这里还可以定制<code>error.vue</code>错误文件啥的</li>
<li><code>pages</code>，nuxt通过该文件夹的目录结构自动生成对应的<code>vue-router</code>，规则见<a href="https://nuxtjs.org/guide/routing" target="_blank" rel="external">Routing</a></li>
<li><code>static</code>，静态文件如<code>favicon.icon</code></li>
<li><code>store</code>，<code>vuex</code>的相关对象如<code>state</code>,<code>mutations</code></li>
<li>所有组件的引入方式都推荐使用<code>~</code>的绝对路径形式，我发现貌似自己新建的目录引入的路径有点问题，暂时没有深入</li>
</ul>
<p>上面这些是nuxt客户端相关的目录，与express后台相关的代码位于<code>server</code>目录</p>
<ul>
<li>已存在的<code>index.js</code>不需要我们更改，</li>
<li>绑定路由需要在<code>server/api/</code>目录下进行，在组件中请求数据则需要带上<code>/api/</code>前缀</li>
<li>可以在<code>api</code>的同级目录新建其他目录，如<code>core</code>服务器核心库文件，<code>model</code>数据库模型，<code>config</code>配置文件等</li>
</ul>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>根目录下存在和两个配置文件，其中</p>
<ul>
<li><code>nuxt.config.js</code>nuxt的配置，指定页面的meta标签，favicon图标，样式表啥的</li>
<li><code>backpack.config.js</code>是<a href="https://github.com/palmerhq/backpack" target="_blank" rel="external">backpack</a>的配置文件，这里暂时不需要进行修改</li>
</ul>
<p>由于项目采用scss，因此记得在nuxt配置文件中添加scss入口文件，否则会报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">css: [</div><div class="line">      &#123;</div><div class="line">          src: &apos;~assets/scss/blog.scss&apos;,</div><div class="line">          lang: &quot;scss&quot;</div><div class="line">      &#125;,</div><div class="line">      &apos;~assets/fonts/iconfont.css&apos;</div><div class="line">  ],</div></pre></td></tr></table></figure>
<h3 id="开发"><a href="#开发" class="headerlink" title="开发"></a>开发</h3><p>在页面迁移的过程中，重新设计了部分组件和路由，对着文档在具体开发的时候倒没遇见啥大问题。</p>
<p>改动比较大的是后台，从PHP迁移到NodeJS需要修改接口，数据库方面暂时使用之前随便写的一个mysql模型类，由于之前设计的数据库很不合理，后面可能会进行调整。</p>
<p>前后端的网络请求使用的是axios，配合express用起来还是很简单的。</p>
<h3 id="开发问题"><a href="#开发问题" class="headerlink" title="开发问题"></a>开发问题</h3><p><strong>后台热更新</strong></p>
<p>后台采用的backpack可以实现服务器热加载（跟supervisor类似），但是启动过程有些缓慢~不知道是不是电脑性能的问题。如果开发时发现接口不正常，记得检查后台服务器是否更新了。</p>
<p><strong>修改文件名</strong></p>
<p>整个项目在WebStorm开发，这里遇见了一个很大的坑：在修改文件名时，webstorm会自动检查项目中的资源引用并自动修改；在其他项目中这是一个很智能的功能，但是在nuxt-express中，比如我只是修改了pages目录下某个路由名称（把<code>index.vue</code>修改为<code>home/index.vue</code>），导致<code>backpack.config.js</code>中的入口文件被修改~整个项目都崩溃了，错误定位还很麻烦。因此建议在修改文件名称时取消自动检索功能。</p>
<p><strong>接口路径</strong></p>
<p>后台路由存放在<code>/server/api</code>目录中，接口统一以<code>/api</code>开头，因为前端和后台都使用<code>3000</code>接口，所以使用<code>api</code>前缀区分后台数据接口和前端路由，这里坑了两次，遇见404错误却发现后台路由貌似没毛病的时候，记得检查请求路径</p>
<p><strong>vue拓展</strong></p>
<p>nuxt在vue基础上拓展了几个常用的属性，使用方式见<a href="https://nuxtjs.org/guide/views" target="_blank" rel="external">文档</a>，注意在dev模式下，<code>asyncData</code>的catch错误是在服务端控制台显示的，调试的话请注意。</p>
<h2 id="项目部署"><a href="#项目部署" class="headerlink" title="项目部署"></a>项目部署</h2><p>项目从vue-cli迁移完毕之后，就可以使用<code>npm run build</code>接<code>npm run start</code>进行打包和部署了。先在VMware虚拟机<code>ubuntu14.04 LTS</code>进行模拟，然后再部署到阿里云，这个过程中遇见了无数的坑。</p>
<p>下面的步骤是我现在回忆的，可能会有一些问题，但大致方向是没错的~不要打我。使用的远程服务器连接工具是<code>putty</code>。</p>
<h3 id="node"><a href="#node" class="headerlink" title="node"></a>node</h3><p>由于后台使用了<code>backpack</code>，因此需要<code>nodeV6.0</code>以上的版本，之前的ubuntu下node版本太低了（V0.10）需要重新升级，但是发现使用<code>n stable</code>升级无效，最后重新卸载安装node然后就可以用了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">apt-get remove nodejs</div><div class="line">apt-get install nodejs</div><div class="line">node -v</div></pre></td></tr></table></figure>
<p>但是！！在阿里云上面使用<code>apt-get</code>，死活只能安装v0.10的版本，此外无法使用<code>node -v</code>的命令（貌似node在阿里云上面是另外一个程序）。无奈只能通过源码编译的方式进行安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"># 建议下载nodejs中文网上面的源码，不然速度太慢了~</div><div class="line">wget https://npm.taobao.org/mirrors/node/v8.1.3/node-v8.1.3.tar.gz</div><div class="line"># 解压</div><div class="line">tar xvf node-v8.1.3.tar.gz</div><div class="line"># 切换目录</div><div class="line">cd node-v8.1.3</div><div class="line"></div><div class="line"># 配置</div><div class="line">./configure </div><div class="line"># 编译，这一步非常漫长，大概一二十分钟，可以玩把游戏</div><div class="line">make</div><div class="line"># 安装</div><div class="line">make install</div><div class="line"></div><div class="line"># 环境变量</div><div class="line">cp /usr/local/bin/node /usr/sbin/ </div><div class="line">node -v</div></pre></td></tr></table></figure>
<p>终于大功告成了~但是！我发现特么没有<code>npm</code>（不是说好node现在默认安装npm吗啊喂），然后只能使用curl进行安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 前面可能需要用PPA</div><div class="line">curl http://npmjs.org/install.sh | sudo sh</div><div class="line"># 更新npm</div><div class="line">npm install -g npm</div></pre></td></tr></table></figure>
<p>记得修改npm的镜像地址，不然下载比较坑</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm config set registry https://registry.npm.taobao.org</div></pre></td></tr></table></figure>
<p>在阿里云上装环境有点麻烦啊~好吧是我不熟悉。</p>
<h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><p>但是本地服务器运行在3000端口上，因此需要使用反向代理。Apache的反向代理之前没有接触过，因此转向使用nginx做代理</p>
<p><strong>安装</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># 安装</div><div class="line">sudo apt-get install nginx </div><div class="line"></div><div class="line"># 修改默认端口号 80-&gt;88 ，防止与apache2冲突，这一步不是必须的，反正我们后面还是要关闭apache</div><div class="line">sudo vim /etc/nginx/sites-available/default</div><div class="line"></div><div class="line"># 启动nginx</div><div class="line">sudo service nginx start</div><div class="line"># 查看状态，如果显示not running则可能需要关闭apache</div><div class="line">sudo service nginx status</div></pre></td></tr></table></figure>
<p>然后在浏览器访问<code>localhost:88</code>就可以看见ngnix欢迎界面了，由于我这边开的是vmware虚拟机，也可以通过ip地址访问虚拟主机</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 获取虚拟主机ip</div><div class="line">ifconfig -a</div></pre></td></tr></table></figure>
<p>由于需要频繁修改配置，记得在修改之后重新加载配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nginx -s reload</div></pre></td></tr></table></figure>
<p><strong>反向代理</strong></p>
<p>nginx的配置方式要比Apache简洁不少，找到nginx的安装目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /etc/nginx/sites-enabled</div><div class="line">vim default</div></pre></td></tr></table></figure>
<p>然后添加一项<code>server</code>配置即可，这里指定的站点根目录位于<code>/usr/share/nginx/ShyMean</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">        listen 80;</div><div class="line">        server_name www.ssr.com;</div><div class="line">        root ShyMean;</div><div class="line">        index index.html index.htm;</div><div class="line"></div><div class="line">        location / &#123;</div><div class="line">                proxy_pass http://127.0.0.1:3000;</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>转发请求头</strong></p>
<p>由于需要统计访客人数，所以在后台记录用户ip(天地良心我真的不会干啥坏事)，但是测试发现记录的都是<code>127.0.0.1</code>，这就蛋疼了。造成这个问题的原因是没有配置nginx转发请求头，修改上面的<code>location</code>配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">location / &#123;  </div><div class="line">    proxy_pass http://127.0.0.1:3000;</div><div class="line">    proxy_set_header Host $host;  </div><div class="line">    proxy_set_header X-Real-IP $remote_addr;  </div><div class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样就算完成了，总体来说nginx这里并没有遇见啥特别的问题。</p>
<h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><p>由于之前是连接的远程数据库，部署到线上可能需要修改对应的数据库配置文件（位于<code>server/config/db.json</code>中，github上面的代码只有<code>db.example.json</code>，需要自己新建一个）。</p>
<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><p>环境搭好后，就可以编译文件然后开启服务器了。我还是先将代码传到github上面然后再克隆到<code>/usr/share/nginx/ShyMean</code>，等到学了shell后再尝试自动化部署。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># 安装时最好使用root，否则node-sass会报错</div><div class="line">npm i</div><div class="line"></div><div class="line"># 编译</div><div class="line">npm run build</div><div class="line"></div><div class="line"># 启动服务器</div><div class="line">npm run start</div></pre></td></tr></table></figure>
<p>接下来就可以进行测试了，因为是在虚拟机上运行的，所以需要修改windows的hosts文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">192.168.1.6     www.ssr.com</div></pre></td></tr></table></figure>
<p>此时通过浏览器HTTP连接连接虚拟机，就可以看见3000端口的服务器展示的首页了。现在，我们的整个任务基本完成了~</p>
<h3 id="forever"><a href="#forever" class="headerlink" title="forever"></a>forever</h3><p>但！是！当关闭虚拟机或远程服务器时，整个进程就停止了~返回就会返回502错误，我们需要为nuxt开启守护进程，这里使用的是<a href="https://www.npmjs.com/package/forever" target="_blank" rel="external">forever</a>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 全局安装</div><div class="line">npm install forever -g</div></pre></td></tr></table></figure>
<p>官方文档的介绍使用方法是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">forever start app.js</div></pre></td></tr></table></figure>
<p>由于nuxt的<code>npm run start</code>命令配置了<code>cross-env</code>和<code>NODE_ENV</code>等环境变量，虽然使用<code>--help</code>命令找到了配置环境参数的配置<code>-c</code>，但仍旧不能使用上面的方法，百度查了半天没找到解决办法，最后用谷歌<code>forever start npm scripts</code>第一条搜索结果就找到了<a href="https://github.com/foreverjs/forever/issues/540" target="_blank" rel="external">答案</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">forever start -c &quot;npm run start&quot; ./</div></pre></td></tr></table></figure>
<p>呃~论科学上网的重要性。这样整个项目才算是正儿八经的完成了。</p>
<p>等等，最后还有一个坑：使用<code>forever stop 0</code>可以关闭守护进程，但是再次启动时整个守护进程不会生效，貌似是因此3000端口仍被占据的缘故</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 查看3000端口运行的进程</div><div class="line">lsof -i:3000</div></pre></td></tr></table></figure>
<p>果然是之前的node进程没有结束的缘故~找到对应的pid，比如这次是1002</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kill 1002</div></pre></td></tr></table></figure>
<p>然后重新使用<code>forever start</code>即可</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="## 小结"></a>## 小结</h3><p>这次部署真的是处处踩坑，庆幸的是每个问题都能找到解决方案。现在总算是完成了seo的第一步，也有了继续折腾博客的动力；此外对于Linux终于不那么敬畏了，打心底也比较喜欢命令行的操作模式，打算下半年买台mbp折腾，哈哈~~</p>

    </div>
    <footer class="article_ft">
        
        <a href="/tags/vue" class="article_tag">#vue</a>
        
        <a href="/tags/nuxt" class="article_tag">#nuxt</a>
        
        <a href="/tags/nginx" class="article_tag">#nginx</a>
        
    </footer>

    <div class="article_nav"><a href="/article/mockjs使用心得" class="hover-highlight article_prev">mockjs使用心得</a><a
                href="/article/博客SSR实践总结" class="hover-highlight article_next">博客SSR实践总结</a></div>
</article>
        </div>
    </main>

    <aside>
    <div class="page_sd hide-md">
        <div class="tab">
            <!---->
            
            <ul class="tab_nav">
                <li class="tab_item active" data-target="#J_toc">
                    文章目录
                </li>
                <li class="tab_item" data-target="#J_profile">
                    站点资料
                </li>
            </ul>
            <div class="tab_panel active" id="J_toc">
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#SSR概念"><span class="toc-number">1.</span> <span class="toc-text">SSR概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目迁移"><span class="toc-number">2.</span> <span class="toc-text">项目迁移</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Nuxt"><span class="toc-number">2.1.</span> <span class="toc-text">Nuxt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nuxt-express"><span class="toc-number">2.2.</span> <span class="toc-text">nuxt-express</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#目录"><span class="toc-number">2.3.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置"><span class="toc-number">2.4.</span> <span class="toc-text">配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#开发"><span class="toc-number">2.5.</span> <span class="toc-text">开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#开发问题"><span class="toc-number">2.6.</span> <span class="toc-text">开发问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目部署"><span class="toc-number">3.</span> <span class="toc-text">项目部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#node"><span class="toc-number">3.1.</span> <span class="toc-text">node</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nginx"><span class="toc-number">3.2.</span> <span class="toc-text">nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql"><span class="toc-number">3.3.</span> <span class="toc-text">mysql</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#部署"><span class="toc-number">3.4.</span> <span class="toc-text">部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#forever"><span class="toc-number">3.5.</span> <span class="toc-text">forever</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#小结"><span class="toc-number">3.6.</span> <span class="toc-text">## 小结</span></a></li></ol></li></ol>
            </div>
            
            <div class="tab_panel " id="J_profile">
                <div>
                    <div class="me">
                        <img src="http://shymean.com/_nuxt/img/head.dd612ee.jpg" alt="shymean" width="100" height="100">
                        <h3>shymean</h3>
                        <p>一个不学无术且无趣的人。</p>
                    </div>
                    <div class="nav-border">
                        <a href="/book" class="nav_item">
                            <i class="iconfont icon-bookshelf"></i>
                            <br>书架
                        </a>
                        <a href="/message" class="nav_item">
                            <i class="iconfont icon-comment"></i>
                            <br>留言
                        </a>
                        <a href="/about" class="nav_item">
                            <i class="iconfont icon-info"></i>
                            <br>关于
                        </a>
                    </div>
                    <div class="contact">
                        <a href="https://github.com/tangxiangmin" target="_blank" class="contact_link">
                            <i class="iconfont icon-github"></i> GitHub</a>
                        <a href="http://wpa.qq.com/msgrd?v=3&amp;uin=645234650&amp;site=qq&amp;menu=yes"
                            target="_blank" class="contact_link">
                            <i class="iconfont icon-qq"></i> QQ</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tool">
        <div class="btn-list hide-md" id="J_toggleSide">
            <div class="btn-icon">
                <span class="btn-line"></span>
                <span class="btn-line"></span>
                <span class="btn-line"></span>
            </div>
        </div>
        <div class="btn-top">
            <i class="iconfont icon-top"></i>
        </div>
    </div>
</aside>
    <footer class="page_ft">
    <div class="container footer">
        <p>世人的悲欢并不相通，我只是觉得他们吵闹。</p>
        <p>
            Copyright © Shymean 2016 - 2017
            <a href="http://www.miitbeian.gov.cn" rel="nofollow" target="_blank" style="display:inline-block;">粤ICP备17060238号-1</a>
        </p>
    </div>
    <div class="hide-xs">
        <script src="https://s19.cnzz.com/z_stat.php?id=1264491168&amp;web_id=1264491168" language="JavaScript"></script>
    </div>
</footer>

</div>

</body>
</html>