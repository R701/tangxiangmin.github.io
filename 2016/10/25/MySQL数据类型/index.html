<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="/css/blog.css">
    <link rel="stylesheet" href="/css/fonts/iconfont.css">
    <!--<link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css">-->
    <link rel="stylesheet" href="//cdn.bootcss.com/fancybox/3.1.25/jquery.fancybox.min.css">
    <script src="/js/require.js" data-main="/js/main"></script>
</head>
<body>
<div id="blog" class="page page-theme-base" v-cloak>
    <blog-header></blog-header>
    <header class="page_hd" data-v-04342fbc="">
    <div class="container header" data-v-04342fbc="">
        <h1 class="logo" data-v-04342fbc="">
            <a href="/" class="nuxt-link-exact-active nuxt-link-active" data-v-04342fbc="">橙红年代</a>
        </h1>
        <div class="show-md" data-v-04342fbc="">
            <div class="btn-list" data-v-04342fbc="">
                <div class="btn-icon" data-v-04342fbc="">
                    <span class="btn-line" data-v-04342fbc=""></span>
                    <span class="btn-line" data-v-04342fbc=""></span>
                    <span class="btn-line" data-v-04342fbc=""></span>
                </div>
            </div>
        </div>
        <nav class="nav-responsive" data-v-04342fbc="">
            
            <a class="nav_item" href="/">首页</a>
            
            <a class="nav_item" href="/archives">归档</a>
            
            <a class="nav_item" href="/tags">标签</a>
            
        </nav>
    </div>
</header>
    <main class="page_mn" >
        <div class="container">
            <article class="article article-detail">
    <header class="text-center">
        <h2 class="article_hd">MySQL数据类型</h2>
        <div class="article_info">
            <span class="hide-sm">发表于</span>
            <span class="show-sm">
                <i class="iconfont icon-archives"></i>
            </span>
            <time>2016/10/25 22:52:10</time>
            |
            <span class="hide-sm">分类于</span>
            <span class="show-sm"><i class="iconfont icon-tag"></i></span>
            
                <a href="/categories/数据库" class="hover-highlight">数据库</a>
            

        </div>
    </header>
    <div class="article_ct">
        <p>最近在练习一个后台小项目，随便规划了几个需求之后开始搭环境（好吧其实就是写了几个页面然后上ThinkPHP），当正儿八经的开始写后台项目的时候才发现，在数据库中该怎么为每个字段选择合适的数据类型呢？然而我连MySQL数据库的每种数据类型的具体作用都不太熟悉，细思极恐，赶紧恶补一番。<br><a id="more"></a><br>合理的数据库结构和数据类型是高性能数据库的关键，而使用何种数据类型来保存数据并没有强制的规定，这里找到了前辈们总结的一些经验，感谢互联网。<br>参考资料：</p>
<ul>
<li><a href="http://jingyan.baidu.com/article/f0062228d2e4a8fbd3f0c8a6.html" target="_blank" rel="external">百度经验</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_4e36a71001013mgg.html" target="_blank" rel="external">MySQL建表时选择最佳的数据类型</a></li>
</ul>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>在挑选合适的数据类型之前，先看一看MySQL具体的数据类型有什么吧。</p>
<h3 id="数字类型"><a href="#数字类型" class="headerlink" title="数字类型"></a>数字类型</h3><p>数字类型又可以分为整数类、小数类和数字类。</p>
<h4 id="数字类"><a href="#数字类" class="headerlink" title="数字类"></a>数字类</h4><p>所谓的“数字类”，就是指 DECIMAL 和 NUMERIC，它们是同一种类型（在phpmyadmin中并没有看见NUMERIC），这种类型又叫做定点数，指的是小数的位数固定，整数部分最大为65，小数部分最大为30。实际上这种数据类型是将数字以字符串形式保存，在运算中不会失真，比较适合用于“价格”、“金额”这样对精度要求不高但准确度要求非常高的财务数据字段。</p>
<h4 id="小数类"><a href="#小数类" class="headerlink" title="小数类"></a>小数类</h4><p>小数即为浮点数，包括FLOAT（占4个字节）和DOUBLE（占8个字节）类两种。浮点数的优点在于表达的数值范围十分大，可以表示很小或者很大的数值。缺点是浮点数存在误差问题，需要尽量避免做浮点比较。实际上，平常项目所用到的数据哪里会需要那么大的数值范围呢。</p>
<h4 id="整数类"><a href="#整数类" class="headerlink" title="整数类"></a>整数类</h4><p>实际上数据库用到最多的数据类型就是整数类，根据所占内存大小分为了TINYINT,SMALLINT,MEDIUMINT,INT和BIGINT这几种，分别占1，2，3，4，8个字节。</p>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><p>字符串类型又包括了字符和文本。</p>
<h4 id="字符"><a href="#字符" class="headerlink" title="字符"></a>字符</h4><p>CHAR： 指定字节长度，并且在存储时如果完全占据指定内存（即使内容数据实际大小比指定大小要小）；<br>VARCHAR：如果并不确定数据的实际长度，只知道他的阈值（即最大长度），则使用可变长度的VARCHAR类型更合适，这会根据数据的长度自动调节变量所占内存大小（为数据长度+1，多余的一个字节用来存储长度）；</p>
<h4 id="长文本"><a href="#长文本" class="headerlink" title="长文本"></a>长文本</h4><p>如果需要存储很大字节的字符串（比如博客，新闻等）可以使用TEXT来存储，此外还有TINYTEXT,MEDIUMTEXT,LONGTEXT。</p>
<h4 id="大数据"><a href="#大数据" class="headerlink" title="大数据"></a>大数据</h4><p>如果要在数据库存储二进制内容，比如图片，可以使用BLOB数据类型。</p>
<h4 id="枚举和集合"><a href="#枚举和集合" class="headerlink" title="枚举和集合"></a>枚举和集合</h4><p>ENUM：最多可以定义 65535 种不同的字符串从中做出选择，只能并且必须选择其中一种，占用存储空间是一个或两个字节<br>SET：最多可以有 64 个成员，可以选择其中的零个到不限定的多个，占用存储空间是一个到八个字节。</p>
<h3 id="日期和时间"><a href="#日期和时间" class="headerlink" title="日期和时间"></a>日期和时间</h3><p>DATE：如果数据对日期敏感，而对时间没有要求则可以使用DATE类型，需要8个字节<br>TIME：在某些情况下可能只需要单独关注时间则使用TIME类型，需要8个字节<br>DATETIME:包含日期和时间，需要8个字节<br>TIMESTAMP：用来保存时间戳，只需要4个字节，且可以灵活转换为日期时间，因此使用最为频繁，需要注意的时间戳可能受时区影响。</p>
<h2 id="如何选择"><a href="#如何选择" class="headerlink" title="如何选择"></a>如何选择</h2><h3 id="选择小数据类型"><a href="#选择小数据类型" class="headerlink" title="选择小数据类型"></a>选择小数据类型</h3><p>通常情况下，使用占用内存较小的数据类型来存储和读取数据更好：数据类型越小，在磁盘，内存和处理器缓存中占据的空间很小，只需要很小的CPU处理消耗。<br>然而，必须保证没有低估需存储数据的数值范围，否则就是“捡了芝麻丢了西瓜”，毕竟数据库就是用来存储并读取数据的。</p>
<h3 id="避免使用NULL"><a href="#避免使用NULL" class="headerlink" title="避免使用NULL"></a>避免使用NULL</h3><p>如果有需要，最好将字段设置为NOT NULL,空值字段的查询是一件很难的事情，因为空值使得索引、索引分析以及数值比较更加复杂，如果确实需要使用NULL，考虑使用0、特殊值或者一个空的字符串来代替更为合适。</p>
<h3 id="常见的数据对应的类型"><a href="#常见的数据对应的类型" class="headerlink" title="常见的数据对应的类型"></a>常见的数据对应的类型</h3><p>其中有的数据前面已经提到过了，这里再简单总结一下：</p>
<ul>
<li>定点数字类型尽量只在对小数精确计算时才使用、如存储财务数据</li>
<li>数据量较大时、建议把实数类型转为整数类型，因为浮点数不精确，而定点数的计算代价昂贵</li>
<li>如果没有需要，不必对浮点数进行精度指定</li>
<li>很短的字符串或所有值都接近同一个长度，使用CHAR，如存储密码的MD5值</li>
<li>经常变更的列最好使用CHAR，因为CHAR产生的碎片少</li>
<li>对于Unicode编码的字符集，最好使用VARCHAR</li>
<li>很大的数据，比如BOLB和TEXT最好存储在单独的表中</li>
<li>如果没有意外，最好使用TIMESTAMP来保存时间，占用内存较小</li>
</ul>

    </div>
    <footer class="article_ft">
        
        <a href="/tags/数据库" class="article_tag">#数据库</a>
        
    </footer>

    <div class="article_nav"><a href="/article/mockjs使用心得" class="hover-highlight article_prev">mockjs使用心得</a><a
                href="/article/博客SSR实践总结" class="hover-highlight article_next">博客SSR实践总结</a></div>
</article>
        </div>
    </main>

    <aside>
    <div class="page_sd hide-md">
        <div class="tab">
            <!---->
            
            <ul class="tab_nav">
                <li class="tab_item active" data-target="#J_toc">
                    文章目录
                </li>
                <li class="tab_item" data-target="#J_profile">
                    站点资料
                </li>
            </ul>
            <div class="tab_panel active" id="J_toc">
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#数据类型"><span class="toc-number">1.</span> <span class="toc-text">数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数字类型"><span class="toc-number">1.1.</span> <span class="toc-text">数字类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#数字类"><span class="toc-number">1.1.1.</span> <span class="toc-text">数字类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#小数类"><span class="toc-number">1.1.2.</span> <span class="toc-text">小数类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#整数类"><span class="toc-number">1.1.3.</span> <span class="toc-text">整数类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串类型"><span class="toc-number">1.2.</span> <span class="toc-text">字符串类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#字符"><span class="toc-number">1.2.1.</span> <span class="toc-text">字符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#长文本"><span class="toc-number">1.2.2.</span> <span class="toc-text">长文本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#大数据"><span class="toc-number">1.2.3.</span> <span class="toc-text">大数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#枚举和集合"><span class="toc-number">1.2.4.</span> <span class="toc-text">枚举和集合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#日期和时间"><span class="toc-number">1.3.</span> <span class="toc-text">日期和时间</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#如何选择"><span class="toc-number">2.</span> <span class="toc-text">如何选择</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#选择小数据类型"><span class="toc-number">2.1.</span> <span class="toc-text">选择小数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#避免使用NULL"><span class="toc-number">2.2.</span> <span class="toc-text">避免使用NULL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常见的数据对应的类型"><span class="toc-number">2.3.</span> <span class="toc-text">常见的数据对应的类型</span></a></li></ol></li></ol>
            </div>
            
            <div class="tab_panel " id="J_profile">
                <div>
                    <div class="me">
                        <img src="http://shymean.com/_nuxt/img/head.dd612ee.jpg" alt="shymean" width="100" height="100">
                        <h3>shymean</h3>
                        <p>一个不学无术且无趣的人。</p>
                    </div>
                    <div class="nav-border">
                        <a href="/book" class="nav_item">
                            <i class="iconfont icon-bookshelf"></i>
                            <br>书架
                        </a>
                        <a href="/message" class="nav_item">
                            <i class="iconfont icon-comment"></i>
                            <br>留言
                        </a>
                        <a href="/about" class="nav_item">
                            <i class="iconfont icon-info"></i>
                            <br>关于
                        </a>
                    </div>
                    <div class="contact">
                        <a href="https://github.com/tangxiangmin" target="_blank" class="contact_link">
                            <i class="iconfont icon-github"></i> GitHub</a>
                        <a href="http://wpa.qq.com/msgrd?v=3&amp;uin=645234650&amp;site=qq&amp;menu=yes"
                            target="_blank" class="contact_link">
                            <i class="iconfont icon-qq"></i> QQ</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tool">
        <div class="btn-list hide-md" id="J_toggleSide">
            <div class="btn-icon">
                <span class="btn-line"></span>
                <span class="btn-line"></span>
                <span class="btn-line"></span>
            </div>
        </div>
        <div class="btn-top">
            <i class="iconfont icon-top"></i>
        </div>
    </div>
</aside>
    <footer class="page_ft">
    <div class="container footer">
        <p>世人的悲欢并不相通，我只是觉得他们吵闹。</p>
        <p>
            Copyright © Shymean 2016 - 2017
            <a href="http://www.miitbeian.gov.cn" rel="nofollow" target="_blank" style="display:inline-block;">粤ICP备17060238号-1</a>
        </p>
    </div>
    <div class="hide-xs">
        <script src="https://s19.cnzz.com/z_stat.php?id=1264491168&amp;web_id=1264491168" language="JavaScript"></script>
    </div>
</footer>

</div>

</body>
</html>